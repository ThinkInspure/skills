# 渐进式披露设计原则

<cite>
**本文档引用的文件**   
- [SKILL.md](file://skills/skill-creator/SKILL.md)
- [workflows.md](file://skills/skill-creator/references/workflows.md)
- [output-patterns.md](file://skills/skill-creator/references/output-patterns.md)
- [docx/SKILL.md](file://skills/docx/SKILL.md)
- [docx/ooxml.md](file://skills/docx/ooxml.md)
- [pdf/forms.md](file://skills/pdf/forms.md)
</cite>

## 目录
1. [引言](#引言)
2. [三级加载系统](#三级加载系统)
3. 渐进式披露模式
   1. [高层次指南与参考文件模式](#高层次指南与参考文件模式)
   2. [领域特定组织模式](#领域特定组织模式)
   3. [条件细节模式](#条件细节模式)
4. [最佳实践与信息流设计](#最佳实践与信息流设计)
5. [结论](#结论)

## 引言

渐进式披露设计原则是一种高效管理AI上下文窗口的策略，通过分层加载信息来最小化上下文占用并最大化执行效率。该原则在技能（Skill）系统中通过一个三级加载系统实现：元数据、SKILL.md正文和捆绑资源。这种设计确保了AI仅在需要时加载必要的信息，从而避免了上下文窗口的浪费。

**Section sources**
- [SKILL.md](file://skills/skill-creator/SKILL.md#L114-L121)

## 三级加载系统

渐进式披露设计原则的核心是一个三级加载系统，它将信息分为三个层次，按需加载：

1. **元数据（名称 + 描述）**：始终在上下文中，约100个词。
2. **SKILL.md正文**：当技能触发时加载，通常小于5000个词。
3. **捆绑资源**：根据需要由AI加载，因为脚本可以在不读入上下文窗口的情况下执行，所以理论上是无限的。

这种分层方法确保了AI在处理任务时，首先基于元数据判断是否使用某个技能，然后在技能触发后加载详细的指导信息，最后在需要时按需加载具体的参考文件或执行脚本。

**Section sources**
- [SKILL.md](file://skills/skill-creator/SKILL.md#L118-L120)

## 渐进式披露模式

### 高层次指南与参考文件模式

此模式通过在SKILL.md中保留核心流程，并链接到详细的参考文件（如FORMS.md或OOXML.md）来实现信息的分层管理。例如，在`docx/SKILL.md`中，文档创建和编辑的核心流程被保留，而详细的OOXML技术参考则被移至`ooxml.md`文件中。当用户需要进行复杂的文档编辑时，AI会按需加载`ooxml.md`文件，从而避免了在初始上下文中加载大量不必要的信息。

**Section sources**
- [docx/SKILL.md](file://skills/docx/SKILL.md#L180-L193)
- [SKILL.md](file://skills/skill-creator/SKILL.md#L128-L143)

### 领域特定组织模式

对于支持多个领域或框架的技能，此模式通过按领域或框架组织`references/`目录来避免加载无关的上下文。例如，一个支持AWS、GCP和Azure的云部署技能，可以将每个云平台的部署模式分别存储在`aws.md`、`gcp.md`和`azure.md`文件中。当用户选择AWS时，AI只需加载`aws.md`，而无需加载其他平台的文档，从而显著减少了上下文占用。

**Section sources**
- [SKILL.md](file://skills/skill-creator/SKILL.md#L147-L172)

### 条件细节模式

此模式通过在基础指令中提供链接，按需加载高级功能的详细信息。例如，在`pdf/forms.md`中，AI首先检查PDF是否有可填写的表单字段，然后根据结果决定是加载`check_fillable_fields.py`脚本还是`convert_pdf_to_images.py`脚本。这种条件性的加载机制确保了AI只在需要时才加载相关的高级功能，从而保持了上下文的简洁性。

**Section sources**
- [forms.md](file://skills/pdf/forms.md#L1-L77)

## 最佳实践与信息流设计

结合`references/workflows.md`和`references/output-patterns.md`中的最佳实践，可以设计出高效的信息流。例如，在`workflows.md`中，复杂的任务被分解为清晰的顺序步骤，而`output-patterns.md`则提供了模板和示例模式，以确保输出的一致性和高质量。通过这些最佳实践，AI可以更有效地管理上下文窗口，同时确保任务的准确执行。

**Section sources**
- [workflows.md](file://skills/skill-creator/references/workflows.md#L3-L28)
- [output-patterns.md](file://skills/skill-creator/references/output-patterns.md#L1-L83)

## 结论

渐进式披露设计原则通过三级加载系统和三种主要的披露模式，有效地管理了AI的上下文窗口。通过将信息分层并按需加载，AI能够在保持上下文简洁的同时，准确地执行复杂的任务。这种设计不仅提高了执行效率，还确保了上下文的最小占用，是构建高效AI系统的最佳实践。